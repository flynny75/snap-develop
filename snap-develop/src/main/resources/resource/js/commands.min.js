define("require exports jquery project alert socket console editor tree threads dialog explorer debug".split(" "),function(A,n,p,q,w,e,m,g,k,l,h,x,y){(function(b){function n(a,c){a?p.ajax({url:"/type/"+document.title+"?expression\x3d"+a,success:function(a){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(f);d.sort();for(var b=[],e=0;e<d.length;e++)f=d[e],f=a[f],b.push({name:f.name,resource:f.resource,type:f.type,project:document.title});c(b)},async:!0}):c([])}function t(a,c){c||(c="*.snap,*.properties,*.xml,*.txt,*.json");
var d=h.DialogBuilder.createTextSearchOnlyDialog;a&&(d=h.DialogBuilder.createTextSearchAndReplaceDialog);d(function(a,c,d,b){u(a,c,d,function(a){for(var c=[],d=0;d<a.length;d++){var f=a[d],e=window.document.location.pathname;e.indexOf(";debug",e.length-6);e="/resource/"+f.project+"/"+f.resource;c.push([{text:f.resource,line:f.line,resource:e,style:"resourceNode"},{text:f.text,line:f.line,resource:e,style:"textNode"}])}return b(c)})},c,a?"Replace Text":"Find Text")}function u(a,c,d,b){if(a&&1<a.length){var f;
f="/find/"+document.title;f+="?expression\x3d"+encodeURIComponent(a);f+="\x26pattern\x3d"+encodeURIComponent(c);f+="\x26caseSensitive\x3d"+encodeURIComponent(d.caseSensitive);f+="\x26regularExpression\x3d"+encodeURIComponent(d.regularExpression);f+="\x26wholeWord\x3d"+encodeURIComponent(d.wholeWord);f+="\x26replace\x3d"+encodeURIComponent(d.replace);f+="\x26enableReplace\x3d"+encodeURIComponent(d.enableReplace);p.ajax({url:f,success:function(a){for(var c=[],d=0;d<a.length;d++)c.push(a[d]);b(c)},async:!0})}else b([])}
function z(a,c){a&&1<a.length?p.ajax({url:"/file/"+document.title+"?expression\x3d"+a,success:function(a){for(var d=[],b=0;b<a.length;b++)d.push(a[b]);c(d)},async:!0}):c([])}function v(a,c){var d=g.FileEditor.loadEditor();null==d.resource?h.DialogBuilder.openTreeDialog(null,!1,function(d){r(c);a()}):g.FileEditor.isEditorChanged()?h.DialogBuilder.openTreeDialog(d.resource,!0,function(d){r(c);a()}):(m.ProcessConsole.clearConsole(),a())}function r(a){var c=g.FileEditor.loadEditor(),d=c.resource;if(null!=
d){var b={project:document.title,resource:d.filePath,source:c.source,directory:!1,create:!1};m.ProcessConsole.clearConsole();e.EventBus.sendEvent("SAVE",b);a&&g.FileEditor.updateEditor(c.source,d.projectPath)}}b.searchTypes=function(){h.DialogBuilder.createListDialog(function(a,c,d){n(a,function(a){for(var c=[],b=0;b<a.length;b++){var e=window.document.location.pathname,e=-1!==e.indexOf(";debug",e.length-6),g="/project/"+a[b].project;e&&(g+=";debug");g+="#"+a[b].resource;c.push([{text:a[b].name,link:g,
style:"module"==a[b].type?"moduleNode":"typeNode"},{text:a[b].resource,link:g,style:"resourceNode"}])}d(c)})},null,"Search Types")};b.replaceTokenInFiles=function(a,c,d){u(a,d,c,function(a){for(var c=g.FileEditor.loadEditor(),d=0;d<a.length;d++){var b=a[d],b=k.FileTree.createResourcePath("/resource/"+b.project+"/"+b.resource);c.resource.resourcePath==b.resourcePath&&x.FileExplorer.openTreeFile(b.resourcePath,function(){})}})};b.searchFiles=function(a){t(!1,a)};b.searchAndReplaceFiles=function(a){t(!0,
a)};b.findFileNames=function(){h.DialogBuilder.createListDialog(function(a,c,d){z(a,function(a){for(var c=[],b=0;b<a.length;b++){var e=a[b],g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+e.project;g&&(h+=";debug");h+="#"+e.resource;c.push([{text:e.text,link:h,style:"resourceNode"}])}return d(c)})},null,"Find Files")};b.exploreDirectory=function(a){k.FileTree.isResourceFolder(a.filePath)&&e.EventBus.sendEvent("EXPLORE",{project:document.title,resource:a.filePath})};
b.folderExpand=function(a){e.EventBus.sendEvent("FOLDER_EXPAND",{project:document.title,folder:a})};b.folderCollapse=function(a){e.EventBus.sendEvent("FOLDER_COLLAPSE",{project:document.title,folder:a})};b.pingProcess=function(){e.EventBus.isSocketOpen()&&e.EventBus.sendEvent("PING",document.title)};b.isDragAndDropFilePossible=function(a,c){return c.folder};b.dragAndDropFile=function(a,c){if(c.folder){var b=k.FileTree.createResourcePath(a.name),g=k.FileTree.createResourcePath(c.name),f=k.FileTree.cleanResourcePath(b.filePath),
b=k.FileTree.cleanResourcePath(g.filePath+"/"+b.fileName);console.log("source: "+f+" destination: "+b);e.EventBus.sendEvent("RENAME",{project:document.title,from:f,to:b,dragAndDrop:!0});q.Project.renameEditorTab(f,b)}};b.renameFile=function(a){var c=a.filePath;h.DialogBuilder.renameFileTreeDialog(a,!0,function(b){e.EventBus.sendEvent("RENAME",{project:document.title,from:c,to:b.filePath,dragAndDrop:!1});q.Project.renameEditorTab(a.resourcePath,b.resourcePath)})};b.renameDirectory=function(a){var b=
a.filePath;a=k.FileTree.createResourcePath(b+".#");h.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){e.EventBus.sendEvent("RENAME",{project:document.title,from:b,to:a.filePath})})};b.newFile=function(a){h.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!k.FileTree.isResourceFolder(a.filePath)){var b={project:document.title,resource:a.filePath,source:"",directory:!1,create:!0};m.ProcessConsole.clearConsole();e.EventBus.sendEvent("SAVE",b);g.FileEditor.updateEditor("",a.projectPath)}})};
b.newDirectory=function(a){h.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){k.FileTree.isResourceFolder(a.filePath)&&(a={project:document.title,resource:a.filePath,source:"",directory:!0,create:!0},m.ProcessConsole.clearConsole(),e.EventBus.sendEvent("SAVE",a))})};b.saveFile=function(){v(function(){},!0)};b.saveEditor=r;b.deleteFile=function(a){var b=g.FileEditor.loadEditor();null==a&&null!=b.resource&&(a=b.resource);null!=a&&(b=g.FileEditor.loadEditor(),w.Alerts.createConfirmAlert("Delete File",
"Delete resource "+b.resource.filePath,"Delete","Cancel",function(){var c={project:document.title,resource:a.filePath};m.ProcessConsole.clearConsole();e.EventBus.sendEvent("DELETE",c);null!=b.resource&&b.resource.resourcePath==a.resourcePath&&g.FileEditor.resetEditor();q.Project.deleteEditorTab(a.resourcePath)},function(){}))};b.deleteDirectory=function(a){null!=a&&(a={project:document.title,resource:a.filePath},m.ProcessConsole.clearConsole(),e.EventBus.sendEvent("DELETE",a))};b.runScript=function(){v(function(){var a=
g.FileEditor.loadEditor();e.EventBus.sendEvent("EXECUTE",{breakpoints:a.breakpoints,project:document.title,resource:a.resource.filePath,source:a.source})},!0)};b.updateScriptBreakpoints=function(){var a={breakpoints:g.FileEditor.loadEditor().breakpoints,project:document.title};e.EventBus.sendEvent("BREAKPOINTS",a)};b.stepOverScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OVER"},g.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};b.stepInScript=
function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_IN"},g.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};b.stepOutScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"STEP_OUT"},g.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",a))};b.resumeScript=function(){var a=l.ThreadManager.focusedThread();null!=a&&(a={thread:a.thread,type:"RUN"},g.FileEditor.clearEditorHighlights(),e.EventBus.sendEvent("STEP",
a))};b.stopScript=function(){e.EventBus.sendEvent("STOP")};b.browseScriptVariables=function(a){var b=l.ThreadManager.focusedThread();null!=b&&e.EventBus.sendEvent("BROWSE",{thread:b.thread,expand:a})};b.browseScriptEvaluation=function(a,b,d){var c=l.ThreadManager.focusedThread();null!=c&&e.EventBus.sendEvent("EVALUATE",{thread:c.thread,expression:b,expand:a,refresh:d})};b.attachProcess=function(a){var b=y.DebugManager.currentStatusFocus(),d=g.FileEditor.loadEditor();e.EventBus.sendEvent("ATTACH",
{process:a,breakpoints:d.breakpoints,project:document.title,focus:b!=a})};b.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};b.updateDisplay=function(a){e.EventBus.isSocketOpen()&&e.EventBus.sendEvent("DISPLAY_UPDATE",a)};b.evaluateExpression=function(){if(null!=l.ThreadManager.focusedThread()){var a=g.FileEditor.getSelectedText();h.DialogBuilder.evaluateExpressionDialog(a)}};
b.refreshScreen=function(){setTimeout(function(){location.reload()},10)};b.switchProject=function(){document.location="/"}})(n.Command||(n.Command={}))});
