var DialogBuilder;
(function(e){function g(a,b,d,f){m(a,b,d,f,"/"+document.title)}function m(a,b,d,f,e){var l="/";null!=a&&(l=a.projectDirectory);w2popup.open({title:f,body:k("",l,!1),buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eSave\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:500,height:400,overflow:"hidden",color:"#333",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(c){setTimeout(function(){var c=document.getElementById("dialogPath");
c.contentEditable=!0;c.focus()},200)},onClose:function(c){console.log("close")},onMax:function(c){console.log("max")},onMin:function(c){console.log("min")},onKeydown:function(c){console.log("keydown")}});$("#dialogSave").click(function(){var c=$("#dialogPath").html(),a=$("#dialogFolder").html(),c=FileTree.cleanResourcePath(c),a=FileTree.cleanResourcePath(a),a=FileTree.createResourcePath(a+"/"+c);d(a);w2popup.close()});$("#dialogCancel").click(function(){w2popup.close()});null!=a&&($("#dialogFolder").html(FileTree.cleanResourcePath(a.projectDirectory)),
$("#dialogPath").html(FileTree.cleanResourcePath(a.fileName)));FileTree.createTree(e,"dialog","dialogTree",l,b,null,function(c,a){var b=FileTree.createResourcePath(a.node.tooltip);a.node.isFolder()?($("#dialogFolder").html(FileTree.cleanResourcePath(b.projectDirectory)),$("#dialogPath").html("")):($("#dialogFolder").html(FileTree.cleanResourcePath(b.projectDirectory)),$("#dialogPath").html(FileTree.cleanResourcePath(b.fileName)))})}function n(a,b,d){b=b?escapeHtml(b):"";w2popup.open({title:d,body:k(b,
null,!1),buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eEvaluate\x3c/button\x3e',width:700,height:400,overflow:"hidden",color:"#333",speed:"0.0",opacity:"0.0",modal:!1,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){$("#dialog").w2grid({recordTitles:!1,name:"evaluation",columns:[{field:"name",caption:"Name",size:"40%",sortable:!1},{field:"value",caption:"Value",size:"30%",sortable:!1},{field:"type",caption:"Type",size:"30%"}],onClick:function(a){var b=this;
a.onComplete=function(){var c=b.getSelection();if(1==c.length){var c=b.get(c[0]),a=$("#dialogPath").html(),a=clearHtml(a);toggleExpandEvaluation(c.path,a)}b.selectNone();b.refresh()}}});setTimeout(function(){showVariables()},200)},200)},onClose:function(a){w2ui.evaluation.destroy();clearEvaluation();Command.browseScriptEvaluation([],"",!0)},onMax:function(a){a.onComplete=function(){w2ui.evaluation.refresh()}},onMin:function(a){a.onComplete=function(){w2ui.evaluation.refresh()}},onKeydown:function(a){console.log("keydown")}});
$("#dialogSave").click(function(){var a=$("#dialogPath").html(),a=clearHtml(a);Command.browseScriptEvaluation([],a,!0)})}function k(a,b,d){if(b){var f="";d&&(f=" onclick\x3d\"this.contentEditable\x3d'true';\"");b||(b="");a||(a="");return'\x3cdiv id\x3d"dialogContainer"\x3e   \x3cdiv id\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogFolder" '+f+"\x3e"+b+'\x3c/div\x3e\x3cdiv id\x3d"dialogPath" onkeydown\x3d"return DialogBuilder.submitDialog(event);" onclick\x3d"this.contentEditable\x3d\'true\';"\x3e'+
a+"\x3c/div\x3e"}return a?'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" onkeydown\x3d"return DialogBuilder.submitDialog(event);" onclick\x3d"this.contentEditable\x3d\'true\';"\x3e'+a+"\x3c/div\x3e":'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" onkeydown\x3d"return DialogBuilder.submitDialog(event);" onclick\x3d"this.contentEditable\x3d\'true\';"\x3e\x3c/div\x3e'}
e.openTreeDialog=function(a,b,d){null!=a?g(a,b,d,"Save Changes"):g(a,b,d,"Save As")};e.renameFileTreeDialog=function(a,b,d){g(a,b,d,"Rename File")};e.renameDirectoryTreeDialog=function(a,b,d){g(a,b,d,"Rename Directory")};e.newFileTreeDialog=function(a,b,d){g(a,b,d,"New File")};e.newDirectoryTreeDialog=function(a,b,d){g(a,b,d,"New Directory")};e.evaluateExpressionDialog=function(a){n(function(a){return[]},a,"Evaluate Expression")};e.createTreeOpenDialog=function(a,b,d,f,e){w2popup.open({title:d,body:k("",
null,null),buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3e'+f+"\x3c/button\x3e",width:500,height:400,overflow:"hidden",color:"#333",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){var a=document.getElementById("dialogPath");a.contentEditable=!0;a.focus()},200)},onClose:function(a){b()},onMax:function(a){console.log("max")},onMin:function(a){console.log("min")},onKeydown:function(a){console.log("keydown")}});$("#dialogSave").click(function(){var b=
$("#dialogPath").html(),b=FileTree.cleanResourcePath(b),b=FileTree.createResourcePath(b),c=b.projectDirectory;c.startsWith("/")&&(c=c.substring(1));a(b,c);w2popup.close()});FileTree.createTreeOfDepth(e,"dialog","dialogTree","/"+document.title,!0,null,function(a,c){var b=FileTree.createResourcePath(c.node.tooltip).projectDirectory;b.startsWith("/")&&(b=b.substring(1));$("#dialogPath").html(FileTree.cleanResourcePath(b))},2)};e.createListDialog=function(a,b,d){w2popup.open({title:d,body:k("",b,!0),
buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:800,height:400,overflow:"hidden",color:"#333",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(d){setTimeout(function(){$("#dialogPath").on("change keyup paste",function(){var d=$("#dialogPath").html(),c=null;b&&(c=$("#dialogFolder").html(),c=clearHtml(c));d&&(d=clearHtml(d));for(var d=a(d,c),c="\x3ctable class\x3d'dialogListTable' width\x3d'100%'\x3e",e=0;e<d.length;e++){for(var f=
d[e],c=c+"\x3ctr\x3e",g=0;g<f.length;g++){var h=f[g],c=c+"\x3ctd width\x3d'50%'\x3e\x3cdiv class\x3d'",c=c+h.style,c=c+"' onclick\x3d'return DialogBuilder.submitDialogListResource";h.line?(c+='("',c+=h.resource,c+='", ',c+=h.line,c+=")"):(c+='("',c+=h.link,c+='")');c+="'\x3e";c+=h.text;c+="\x3c/div\x3e\x3c/td\x3e"}c+="\x3ctd\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e";c+="\x3c/tr\x3e"}c+="\x3c/table\x3e";$("#dialog").html(c)});var d=document.getElementById("dialogPath");d.contentEditable=
!0;d.focus()},200)},onClose:function(a){console.log("close")},onMax:function(a){console.log("max")},onMin:function(a){console.log("min")},onKeydown:function(a){console.log("keydown")}});$("#dialogSave").click(function(){w2popup.close()});$("#dialogCancel").click(function(){w2popup.close()})};e.submitDialogListResource=function(a,b){$("#dialogSave").click();b?FileExplorer.openTreeFile(a,function(){window.setTimeout(function(){FileEditor.showEditorLine(b)},100)}):location.href=a;return!1};e.submitDialog=
function(a){if(13===(a||window.event).keyCode)return $("#dialogSave").click(),!1}})(DialogBuilder||(DialogBuilder={}));ModuleSystem.registerModule("dialog","Dialog module: dialog.js",null,["common","tree"]);
