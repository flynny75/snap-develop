var DialogBuilder;
(function(e){function h(a,b,c,k){m(a,b,c,k,"/"+document.title)}function m(a,b,c,k,f){var d="/";null!=a&&(d=a.projectDirectory);w2popup.open({title:k,body:n(d,""),buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eSave\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:500,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){var a=document.getElementById("dialogPath");
a.contentEditable=!0;a.focus()},200)},onClose:function(a){console.log("close")},onMax:function(a){console.log("max");$(window).trigger("resize")},onMin:function(a){console.log("min");$(window).trigger("resize")},onKeydown:function(a){console.log("keydown")}});$("#dialogSave").click(function(){var a=$("#dialogPath").html(),b=$("#dialogFolder").html(),a=FileTree.cleanResourcePath(a),b=FileTree.cleanResourcePath(b),b=FileTree.createResourcePath(b+"/"+a);c(b);w2popup.close()});$("#dialogCancel").click(function(){w2popup.close()});
null!=a&&($("#dialogFolder").html(FileTree.cleanResourcePath(a.projectDirectory)),$("#dialogPath").html(FileTree.cleanResourcePath(a.fileName)));FileTree.createTree(f,"dialog","dialogTree",d,b,null,function(a,b){var d=FileTree.createResourcePath(b.node.tooltip);b.node.isFolder()?$("#dialogFolder").html(FileTree.cleanResourcePath(d.projectDirectory)):($("#dialogFolder").html(FileTree.cleanResourcePath(d.projectDirectory)),$("#dialogPath").html(FileTree.cleanResourcePath(d.fileName)))})}function p(a,
b){var c=q(a?escapeHtml(a):"");w2popup.open({title:b,body:c,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eEvaluate\x3c/button\x3e',width:700,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!1,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){$("#dialog").w2grid({recordTitles:!1,name:"evaluation",columns:[{field:"name",caption:"Name",size:"40%",sortable:!1},{field:"value",caption:"Value",size:"30%",sortable:!1},{field:"type",caption:"Type",
size:"30%"}],onClick:function(a){var b=this;a.onComplete=function(){var a=b.getSelection();if(1==a.length){var a=b.get(a[0]),d=$("#dialogPath").html(),d=clearHtml(d);VariableManager.toggleExpandEvaluation(a.path,d)}b.selectNone();b.refresh()}}});setTimeout(function(){VariableManager.showVariables()},200)},200)},onClose:function(a){w2ui.evaluation.destroy();VariableManager.clearEvaluation();Command.browseScriptEvaluation([],"",!0)},onMax:function(a){a.onComplete=function(){w2ui.evaluation.refresh()};
$(window).trigger("resize")},onMin:function(a){a.onComplete=function(){w2ui.evaluation.refresh()};$(window).trigger("resize")},onKeydown:function(a){console.log("keydown")}});$("#dialogSave").click(function(){var a=$("#dialogPath").html(),a=clearHtml(a);Command.browseScriptEvaluation([],a,!0)})}function l(a){for(var b="\x3ctable class\x3d'dialogListTable' width\x3d'100%'\x3e",c=0;c<a.length;c++){for(var k=a[c],b=b+("\x3ctr id\x3d'dialogListEntry"+c+"'\x3e"),e=0;e<k.length;e++){var d=k[e],b=b+"\x3ctd width\x3d'50%'\x3e\x3cdiv class\x3d'",
b=b+d.style,b=b+"' onclick\x3d'return DialogBuilder.submitDialogListResource";d.line?(b+='("',b+=d.resource,b+='", ',b+=d.line,b+=")"):(b+='("',b+=d.link,b+='")');b+="'\x3e";b+=d.text;b+="\x3c/div\x3e\x3c/td\x3e"}b+="\x3ctd\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e";b+="\x3c/tr\x3e"}return b+"\x3c/table\x3e"}function q(a){a||(a="");return'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" onkeydown\x3d"return DialogBuilder.submitDialog(event);" contenteditable\x3d"true" onclick\x3d"return DialogBuilder.focusDialogInput(\'dialogPath\');"\x3e'+
a+"\x3c/div\x3e"}function n(a,b){a||(a="");b||(b="");return'\x3cdiv id\x3d"dialogContainer"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialogTree"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"dialogFolder"\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"dialogPath" onkeydown\x3d"return DialogBuilder.submitDialog(event);" contenteditable\x3d"true" onclick\x3d"return DialogBuilder.focusDialogInput(\'dialogPath\');"\x3e'+b+"\x3c/div\x3e"}function r(a,b){b||(b="");return'\x3cdiv id\x3d"dialogContainer"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"fileFilterPatterns" class\x3d"searchFileFilterInputBox" contenteditable\x3d"true" onclick\x3d"return DialogBuilder.focusDialogInput(\'fileFilterPatterns\');"\x3e'+
a+'\x3c/div\x3e\n\x3cdiv id\x3d"searchText" class\x3d"searchValueInputBox" onkeydown\x3d"contenteditable\x3d"true" return DialogBuilder.submitDialog(event);" onclick\x3d"return DialogBuilder.focusDialogInput(\'searchText\');"\x3e'+b+'\x3c/div\x3e\n\x3cdiv class\x3d"searchCheckBoxPanel"\x3e\n   \x3ctable border\x3d"0" cellspacing\x3d"5"\x3e\n      \x3ctr onclick\x3d"return DialogBuilder.toggleCheckboxSelection(\'inputCaseSensitive\')"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"caseSensitive" id\x3d"inputCaseSensitive"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Case sensitive\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3ctr onclick\x3d"return DialogBuilder.toggleCheckboxSelection(\'inputRegularExpression\')"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"regex" id\x3d"inputRegularExpression"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Regular expression\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3c!--tr onclick\x3d"return DialogBuilder.toggleCheckboxSelection(\'inputWholeWord\')"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"wholeWord" id\x3d"inputWholeWord"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Whole word\x3c/td\x3e\n      \x3c/tr--\x3e\n   \x3c/table\x3e\n\x3c/div\x3e'}
function t(a,b){b||(b="");return'\x3cdiv id\x3d"dialogContainerSmall"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"fileFilterPatterns" class\x3d"searchAndReplaceFileFilterInputBox" contenteditable\x3d"true" onclick\x3d"return DialogBuilder.focusDialogInput(\'fileFilterPatterns\');"\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"searchText" class\x3d"searchAndReplaceValueInputBox" contenteditable\x3d"true" onkeydown\x3d"return DialogBuilder.submitDialog(event);" onclick\x3d"return DialogBuilder.focusDialogInput(\'searchText\');"\x3e'+
b+'\x3c/div\x3e\n\x3cdiv id\x3d"replaceText" class\x3d"searchAndReplaceInputBox" contenteditable\x3d"true" onkeydown\x3d"return DialogBuilder.submitDialog(event);" onclick\x3d"return DialogBuilder.focusDialogInput(\'replaceText\');"\x3e\x3c/div\x3e\n\x3cdiv class\x3d"searchAndReplaceCheckBoxPanel"\x3e\n   \x3ctable border\x3d"0" cellspacing\x3d"5"\x3e\n      \x3ctr onclick\x3d"return DialogBuilder.toggleCheckboxSelection(\'inputCaseSensitive\')"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"caseSensitive" id\x3d"inputCaseSensitive"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Case sensitive\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3ctr onclick\x3d"return DialogBuilder.toggleCheckboxSelection(\'inputRegularExpression\')"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"regex" id\x3d"inputRegularExpression"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Regular expression\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3c!--tr onclick\x3d"return DialogBuilder.toggleCheckboxSelection(\'inputWholeWord\')"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"wholeWord" id\x3d"inputWholeWord"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Whole word\x3c/td\x3e\n      \x3c/tr--\x3e\n   \x3c/table\x3e\n\x3c/div\x3e'}
function g(a){return(a=document.getElementById(a))?a.checked:!1}e.openTreeDialog=function(a,b,c){null!=a?h(a,b,c,"Save Changes"):h(a,b,c,"Save As")};e.renameFileTreeDialog=function(a,b,c){h(a,b,c,"Rename File")};e.renameDirectoryTreeDialog=function(a,b,c){h(a,b,c,"Rename Directory")};e.newFileTreeDialog=function(a,b,c){h(a,b,c,"New File")};e.newDirectoryTreeDialog=function(a,b,c){h(a,b,c,"New Directory")};e.evaluateExpressionDialog=function(a){p(a,"Evaluate Expression")};e.createTreeOpenDialog=function(a,
b,c,e,f){w2popup.open({title:c,body:'\x3cdiv id\x3d"dialogContainerBig"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialogTree"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"dialogPath" onkeydown\x3d"return DialogBuilder.submitDialog(event);" contenteditable\x3d"true" onclick\x3d"return DialogBuilder.focusDialogInput(\'dialogPath\');"\x3e\x3c/div\x3e',buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3e'+e+"\x3c/button\x3e",width:500,height:400,overflow:"hidden",color:"#999",speed:"0.3",
opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){var a=document.getElementById("dialogPath");a.contentEditable=!0;a.focus()},200)},onClose:function(a){b()},onMax:function(a){console.log("max");$(window).trigger("resize")},onMin:function(a){console.log("min");$(window).trigger("resize")},onKeydown:function(a){console.log("keydown")}});$("#dialogSave").click(function(){var b=$("#dialogPath").html(),b=FileTree.cleanResourcePath(b),b=FileTree.createResourcePath(b),
c=b.projectDirectory;0==c.indexOf("/")&&(c=c.substring(1));a(b,c);w2popup.close()});FileTree.createTreeOfDepth(f,"dialog","dialogTree","/"+document.title,!0,null,function(a,b){var d=FileTree.createResourcePath(b.node.tooltip).projectDirectory;0==d.indexOf("/")&&(d=d.substring(1));$("#dialogPath").html(FileTree.cleanResourcePath(d))},2)};e.createListDialog=function(a,b,c){w2popup.open({title:c,body:'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" onkeydown\x3d"return DialogBuilder.submitDialog(event);" contenteditable\x3d"true" onclick\x3d"return DialogBuilder.focusDialogInput(\'dialogPath\');"\x3e\x3c/div\x3e',
buttons:'\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:800,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(c){setTimeout(function(){$("#dialogPath").on("change keyup paste",function(){var d=$("#dialogPath").html(),c=null;b&&(c=$("#dialogFolder").html(),c=clearHtml(c));d&&(d=clearHtml(d));a(d,c,function(a){(a=l(a))?$("#dialog").html(a):$("#dialog").html("")})});var c=document.getElementById("dialogPath");
c.contentEditable=!0;c.focus()},200)},onMax:function(a){console.log("max");$(window).trigger("resize")},onMin:function(a){console.log("min");$(window).trigger("resize")}});$("#dialogSave").click(function(){w2popup.close()});$("#dialogCancel").click(function(){w2popup.close()})};e.createTextSearchOnlyDialog=function(a,b,c){var e=r(b,""),f=function(){var d=$("#searchText").html(),c={caseSensitive:g("inputCaseSensitive"),regularExpression:g("inputRegularExpression"),wholeWord:g("inputWholeWord")},e=
null;b&&(e=$("#fileFilterPatterns").html(),e=clearHtml(e));d&&(d=clearHtml(d));a(d,e,c,function(a){(a=l(a))?$("#dialog").html(a):$("#dialog").html("")})};w2popup.open({title:c,body:e,buttons:'\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:800,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){$("#searchText").on("change keyup paste",f);var a=document.getElementById("searchText");
a.contentEditable=!0;a.focus()},200)},onMax:function(a){console.log("max");$(window).trigger("resize")},onMin:function(a){console.log("min");$(window).trigger("resize")}});$("#dialogSave").click(function(){w2popup.close()});$("#dialogCancel").click(function(){w2popup.close()})};e.createTextSearchAndReplaceDialog=function(a,b,c){var e=t(b,""),f=function(){var c=$("#searchText").html(),e={caseSensitive:g("inputCaseSensitive"),regularExpression:g("inputRegularExpression"),wholeWord:g("inputWholeWord")},
f=null;b&&(f=$("#fileFilterPatterns").html(),f=clearHtml(f));c&&(c=clearHtml(c));a(c,f,e,function(a){(a=l(a))?$("#dialog").html(a):$("#dialog").html("")})};w2popup.open({title:c,body:e,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eReplace\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:800,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){$("#searchText").on("change keyup paste",
f);var a=document.getElementById("searchText");a.contentEditable=!0;a.focus()},200)},onMax:function(a){console.log("max");$(window).trigger("resize")},onMin:function(a){console.log("min");$(window).trigger("resize")}});$("#dialogSave").click(function(){var a=$("#searchText").html(),b=$("#replaceText").html(),c=$("#fileFilterPatterns").html(),b={caseSensitive:g("inputCaseSensitive"),regularExpression:g("inputRegularExpression"),wholeWord:g("inputWholeWord"),enableReplace:!0,replace:b};Command.replaceTokenInFiles(a,
b,c);w2popup.close()});$("#dialogCancel").click(function(){w2popup.close()})};e.submitDialogListResource=function(a,b){$("#dialogCancel").click();b?FileExplorer.openTreeFile(a,function(){window.setTimeout(function(){FileEditor.showEditorLine(b)},100)}):location.href=a;return!1};e.focusDialogInput=function(a){document.getElementById(a).contentEditable=!0;document.getElementById(a).focus();document.getElementById(a).focus();return!0};e.toggleCheckboxSelection=function(a){if(a=document.getElementById(a))a.checked=
!a.checked;return!1};e.submitDialog=function(a){if(13===(a||window.event).keyCode)return $("#dialogSave").click(),!1}})(DialogBuilder||(DialogBuilder={}));ModuleSystem.registerModule("dialog","Dialog module: dialog.js",null,null,["common","tree"]);
