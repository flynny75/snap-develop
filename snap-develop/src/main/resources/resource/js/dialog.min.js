define("require exports jquery w2ui common commands variables explorer editor tree".split(" "),function(K,u,b,e,n,v,w,A,B,k){(function(f){function r(b,c,d,g){u(b,c,d,g,"/"+document.title)}function u(a,c,d,g,C){var h="/";null!=a&&(h=a.projectDirectory);var l=D(h,"");e.w2popup.open({title:g,body:l.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eSave\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:500,height:400,
overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(b){setTimeout(function(){l.init();var b=document.getElementById("dialogPath");b.contentEditable=!0;b.focus()},200)},onClose:function(b){console.log("close")},onMax:function(a){console.log("max");b(window).trigger("resize")},onMin:function(a){console.log("min");b(window).trigger("resize")},onKeydown:function(b){console.log("keydown")}});b("#dialogSave").click(function(){var a=b("#dialogPath").html(),
c=b("#dialogFolder").html(),a=k.FileTree.cleanResourcePath(a),c=k.FileTree.cleanResourcePath(c),c=k.FileTree.createResourcePath(c+"/"+a);d(c);e.w2popup.close()});b("#dialogCancel").click(function(){e.w2popup.close()});null!=a&&(b("#dialogFolder").html(k.FileTree.cleanResourcePath(a.projectDirectory)),b("#dialogPath").html(k.FileTree.cleanResourcePath(a.fileName)));k.FileTree.createTree(C,"dialog","dialogTree",h,c,null,function(a,c){var d=k.FileTree.createResourcePath(c.node.tooltip);c.node.isFolder()?
b("#dialogFolder").html(k.FileTree.cleanResourcePath(d.projectDirectory)):(b("#dialogFolder").html(k.FileTree.cleanResourcePath(d.projectDirectory)),b("#dialogPath").html(k.FileTree.cleanResourcePath(d.fileName)))})}function E(a,c){var d=F(a?n.Common.escapeHtml(a):"");e.w2popup.open({title:c,body:d.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eEvaluate\x3c/button\x3e',width:700,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!1,showClose:!0,
showMax:!0,onOpen:function(a){setTimeout(function(){d.init();b("#dialog").w2grid({recordTitles:!1,name:"evaluation",columns:[{field:"name",caption:"Name",size:"40%",sortable:!1},{field:"value",caption:"Value",size:"30%",sortable:!1},{field:"type",caption:"Type",size:"30%"}],onClick:function(a){var c=this;a.onComplete=function(){var a=c.getSelection();if(1==a.length){var a=c.get(a[0]),d=b("#dialogPath").html(),d=n.Common.clearHtml(d);w.VariableManager.toggleExpandEvaluation(a.path,d)}c.selectNone();
c.refresh()}}});setTimeout(function(){w.VariableManager.showVariables()},200)},200)},onClose:function(a){e.w2ui.evaluation.destroy();w.VariableManager.clearEvaluation();v.Command.browseScriptEvaluation([],"",!0)},onMax:function(a){a.onComplete=function(){e.w2ui.evaluation.refresh()};b(window).trigger("resize")},onMin:function(a){a.onComplete=function(){e.w2ui.evaluation.refresh()};b(window).trigger("resize")},onKeydown:function(a){console.log("keydown")}});b("#dialogSave").click(function(){var a=
b("#dialogPath").html(),a=n.Common.clearHtml(a);v.Command.browseScriptEvaluation([],a,!0)})}function x(a){for(var c="\x3ctable class\x3d'dialogListTable' width\x3d'100%'\x3e",d={},g=0;g<a.length;g++){for(var e=a[g],c=c+("\x3ctr id\x3d'dialogListEntry"+g+"'\x3e"),h=0;h<e.length;h++){var l=e[h],z="listEntry_"+g+"_"+h,c=c+("\x3ctd width\x3d'50%'\x3e\x3cdiv id\x3d'"+z+"' class\x3d'"),c=c+l.style,c=c+"'\x3e",c=c+l.text,c=c+"\x3c/div\x3e\x3c/td\x3e";d[z]=function(){return l.line?y(l.resource,l.line):y(l.link)}}c+=
"\x3ctd\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e";c+="\x3c/tr\x3e"}return{content:c+"\x3c/table\x3e",init:function(){for(var a in d)if(d.hasOwnProperty(a)){var c=d[a];b("#"+a).on("click",function(a){return c()})}}}}function F(a){a||(a="");return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e'+a+"\x3c/div\x3e",init:function(){b("#dialogPath").on("keydown",function(a){return q(a)});
b("#dialogPath").on("click",function(a){return m("dialogPath")})}}}function G(){return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e\x3c/div\x3e',init:function(){b("#dialogPath").on("keydown",function(a){return q(a)});b("#dialogPath").on("click",function(a){return m("dialogPath")})}}}function H(){return{content:'\x3cdiv id\x3d"dialogContainerBig"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialogTree"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e\x3c/div\x3e',
init:function(){b("#dialogPath").on("keydown",function(a){return q(a)});b("#dialogPath").on("click",function(a){return m("dialogPath")})}}}function D(a,c){a||(a="");c||(c="");return{content:'\x3cdiv id\x3d"dialogContainer"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialogTree"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"dialogFolder"\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"dialogPath" contenteditable\x3d"true"\x3e'+c+"\x3c/div\x3e",init:function(){b("#dialogPath").on("keydown",function(a){return q(a)});
b("#dialogPath").on("click",function(a){return m("dialogPath")})}}}function I(a,c){c||(c="");return{content:'\x3cdiv id\x3d"dialogContainer"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"fileFilterPatterns" class\x3d"searchFileFilterInputBox" contenteditable\x3d"true""\x3e'+a+'\x3c/div\x3e\n\x3cdiv id\x3d"searchText" class\x3d"searchValueInputBox" contenteditable\x3d"true""\x3e'+c+'\x3c/div\x3e\n\x3cdiv class\x3d"searchCheckBoxPanel"\x3e\n   \x3ctable border\x3d"0" cellspacing\x3d"5"\x3e\n      \x3ctr id\x3d"inputCaseSensitiveRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"caseSensitive" id\x3d"inputCaseSensitive"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Case sensitive\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3ctr id\x3d"inputRegularExpressionRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"regex" id\x3d"inputRegularExpression"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Regular expression\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3c!--tr id\x3d"inputWholeWordRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"wholeWord" id\x3d"inputWholeWord"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Whole word\x3c/td\x3e\n      \x3c/tr--\x3e\n   \x3c/table\x3e\n\x3c/div\x3e',
init:function(){b("#fileFilterPatterns").on("click",function(a){return m("fileFilterPatterns")});b("#searchText").on("keydown",function(a){return q(a)});b("#searchText").on("click",function(a){return m("searchText")});b("#inputCaseSensitiveRow").on("click",function(a){return t("inputCaseSensitive")});b("#inputRegularExpressionRow").on("click",function(a){return t("inputRegularExpression")})}}}function J(a,c){c||(c="");return{content:'\x3cdiv id\x3d"dialogContainerSmall"\x3e\n   \x3cdiv id\x3d"dialog" class\x3d"dialog"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv id\x3d"fileFilterPatterns" class\x3d"searchAndReplaceFileFilterInputBox" contenteditable\x3d"true""\x3e'+
a+'\x3c/div\x3e\n\x3cdiv id\x3d"searchText" class\x3d"searchAndReplaceValueInputBox" contenteditable\x3d"true"\x3e'+c+'\x3c/div\x3e\n\x3cdiv id\x3d"replaceText" class\x3d"searchAndReplaceInputBox" contenteditable\x3d"true"\x3e\x3c/div\x3e\n\x3cdiv class\x3d"searchAndReplaceCheckBoxPanel"\x3e\n   \x3ctable border\x3d"0" cellspacing\x3d"5"\x3e\n      \x3ctr id\x3d"inputCaseSensitiveRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"caseSensitive" id\x3d"inputCaseSensitive"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Case sensitive\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3ctr id\x3d"inputRegularExpressionRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"regex" id\x3d"inputRegularExpression"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Regular expression\x3c/td\x3e\n      \x3c/tr\x3e\n      \x3ctr\x3e\x3ctd height\x3d"5px"\x3e\x3c/td\x3e\x3c/tr\x3e\n      \x3c!--tr id\x3d"inputWholeWordRow"\x3e\n         \x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"wholeWord" id\x3d"inputWholeWord"\x3e\x3clabel\x3e\x3c/label\x3e\x26nbsp;\x26nbsp;Whole word\x3c/td\x3e\n      \x3c/tr--\x3e\n   \x3c/table\x3e\n\x3c/div\x3e',
init:function(){b("#fileFilterPatterns").on("click",function(a){return m("fileFilterPatterns")});b("#searchText").on("keydown",function(a){return q(a)});b("#searchText").on("click",function(a){return m("searchText")});b("#replaceText").on("keydown",function(a){return q(a)});b("#replaceText").on("click",function(a){return m("replaceText")});b("#inputCaseSensitiveRow").on("click",function(a){return t("inputCaseSensitive")});b("#inputRegularExpressionRow").on("click",function(a){return t("inputRegularExpression")})}}}
function y(a,c){b("#dialogCancel").click();c?A.FileExplorer.openTreeFile(a,function(){window.setTimeout(function(){B.FileEditor.showEditorLine(c)},100)}):location.href=a;return!1}function m(a){document.getElementById(a).contentEditable=!0;document.getElementById(a).focus();document.getElementById(a).focus();return!0}function p(a){return(a=document.getElementById(a))?a.checked:!1}function t(a){if(a=document.getElementById(a))a.checked=!a.checked;return!1}function q(a){if(13===(a||window.event).keyCode)return b("#dialogSave").click(),
!1}f.openTreeDialog=function(a,b,d){null!=a?r(a,b,d,"Save Changes"):r(a,b,d,"Save As")};f.renameFileTreeDialog=function(a,b,d){r(a,b,d,"Rename File")};f.renameDirectoryTreeDialog=function(a,b,d){r(a,b,d,"Rename Directory")};f.newFileTreeDialog=function(a,b,d){r(a,b,d,"New File")};f.newDirectoryTreeDialog=function(a,b,d){r(a,b,d,"New Directory")};f.evaluateExpressionDialog=function(a){E(a,"Evaluate Expression")};f.createTreeOpenDialog=function(a,c,d,g,f){var h=H();e.w2popup.open({title:d,body:h.content,
buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3e'+g+"\x3c/button\x3e",width:500,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){h.init();var a=document.getElementById("dialogPath");a.contentEditable=!0;a.focus()},200)},onClose:function(a){c()},onMax:function(a){console.log("max");b(window).trigger("resize")},onMin:function(a){console.log("min");b(window).trigger("resize")},onKeydown:function(a){console.log("keydown")}});
b("#dialogSave").click(function(){var c=b("#dialogPath").html(),c=k.FileTree.cleanResourcePath(c),c=k.FileTree.createResourcePath(c),d=c.projectDirectory;0==d.indexOf("/")&&(d=d.substring(1));a(c,d);e.w2popup.close()});k.FileTree.createTreeOfDepth(f,"dialog","dialogTree","/"+document.title,!0,null,function(a,c){var d=k.FileTree.createResourcePath(c.node.tooltip).projectDirectory;0==d.indexOf("/")&&(d=d.substring(1));b("#dialogPath").html(k.FileTree.cleanResourcePath(d))},2)};f.createListDialog=function(a,
c,d){var g=G();e.w2popup.open({title:d,body:g.content,buttons:'\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:800,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(d){setTimeout(function(){g.init();b("#dialogPath").on("change keyup paste",function(){var d=b("#dialogPath").html(),h=null;c&&(h=b("#dialogFolder").html(),h=n.Common.clearHtml(h));d&&(d=n.Common.clearHtml(d));a(d,h,function(a){a=
x(a);a.content?b("#dialog").html(a.content):b("#dialog").html("");a.init&&setTimeout(a.init,100)})});var d=document.getElementById("dialogPath");d.contentEditable=!0;d.focus()},200)},onMax:function(a){console.log("max");b(window).trigger("resize")},onMin:function(a){console.log("min");b(window).trigger("resize")}});b("#dialogSave").click(function(){e.w2popup.close()});b("#dialogCancel").click(function(){e.w2popup.close()})};f.createTextSearchOnlyDialog=function(a,c,d){var g=I(c,""),f=function(){var d=
b("#searchText").html(),l={caseSensitive:p("inputCaseSensitive"),regularExpression:p("inputRegularExpression"),wholeWord:p("inputWholeWord")},e=null;c&&(e=b("#fileFilterPatterns").html(),e=n.Common.clearHtml(e));d&&(d=n.Common.clearHtml(d));a(d,e,l,function(a){a=x(a);a.content?b("#dialog").html(a.content):b("#dialog").html("");a.init&&setTimeout(a.init,100)})};e.w2popup.open({title:d,body:g.content,buttons:'\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',width:800,
height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){g.init();b("#searchText").on("change keyup paste",f);var a=document.getElementById("searchText");a.contentEditable=!0;a.focus()},200)},onMax:function(a){console.log("max");b(window).trigger("resize")},onMin:function(a){console.log("min");b(window).trigger("resize")}});b("#dialogSave").click(function(){e.w2popup.close()});b("#dialogCancel").click(function(){e.w2popup.close()})};
f.createTextSearchAndReplaceDialog=function(a,c,d){var g=J(c,""),f=function(){var d=b("#searchText").html(),e={caseSensitive:p("inputCaseSensitive"),regularExpression:p("inputRegularExpression"),wholeWord:p("inputWholeWord")},f=null;c&&(f=b("#fileFilterPatterns").html(),f=n.Common.clearHtml(f));d&&(d=n.Common.clearHtml(d));a(d,f,e,function(a){a=x(a);a.content?b("#dialog").html(a.content):b("#dialog").html("");a.init&&setTimeout(a.init,100)})};e.w2popup.open({title:d,body:g.content,buttons:'\x3cbutton id\x3d"dialogSave" class\x3d"btn dialogButton"\x3eReplace\x3c/button\x3e\x3cbutton id\x3d"dialogCancel" class\x3d"btn dialogButton"\x3eCancel\x3c/button\x3e',
width:800,height:400,overflow:"hidden",color:"#999",speed:"0.3",opacity:"0.8",modal:!0,showClose:!0,showMax:!0,onOpen:function(a){setTimeout(function(){g.init();b("#searchText").on("change keyup paste",f);var a=document.getElementById("searchText");a.contentEditable=!0;a.focus()},200)},onMax:function(a){console.log("max");b(window).trigger("resize")},onMin:function(a){console.log("min");b(window).trigger("resize")}});b("#dialogSave").click(function(){var a=b("#searchText").html(),c=b("#replaceText").html(),
d=b("#fileFilterPatterns").html(),c={caseSensitive:p("inputCaseSensitive"),regularExpression:p("inputRegularExpression"),wholeWord:p("inputWholeWord"),enableReplace:!0,replace:c};v.Command.replaceTokenInFiles(a,c,d);e.w2popup.close()});b("#dialogCancel").click(function(){e.w2popup.close()})};f.submitDialogListResource=y;f.focusDialogInput=m;f.toggleCheckboxSelection=t;f.submitDialog=q})(u.DialogBuilder||(u.DialogBuilder={}))});
