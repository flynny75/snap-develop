define("require exports jquery filesaver ./common ./socket ./tree ./editor ./commands ./alert".split(" "),function(w,f,h,r,k,t,p,g,d,u){(function(m){function f(a,b,c){p.FileTree.createTree("/"+document.title,"explorer","explorerTree","/.",!1,v,function(a,b){b.node.isFolder()||l(b.node.tooltip,function(){})})}function l(a,b){var c=a.toLowerCase();k.Common.stringEndsWith(c,".json")||k.Common.stringEndsWith(c,".js")?h.get(a,function(c){e(a,b,c)},"text").fail(function(){e(a,b,"// Could not find "+c)}):
h.get(a,function(c){e(a,b,c)}).fail(function(){e(a,b,"// Could not find "+c)})}function e(a,b,c){if(null==g.FileEditor.resolveEditorMode(a)){var n=new Blob([c],{type:"application/octet-stream"}),e=a.replace(/.*\//,"");r.saveAs(n,e)}else g.FileEditor.isEditorChanged()?(n="Save resource "+g.FileEditor.loadEditor().resource.filePath,u.Alerts.createConfirmAlert("File Changed",n,"Save","Ignore",function(){d.Command.saveEditor(!0)},function(){g.FileEditor.updateEditor(c,a)})):g.FileEditor.updateEditor(c,
a);b()}function v(a,b,c,e){"runScript"==b?l(a.resourcePath,function(){d.Command.runScript()}):"newFile"==b?d.Command.newFile(a):"newDirectory"==b?d.Command.newDirectory(a):"exploreDirectory"==b?d.Command.exploreDirectory(a):"renameFile"==b?e?d.Command.renameDirectory(a):d.Command.renameFile(a):"saveFile"==b?l(a.resourcePath,function(){d.Command.saveFile()}):"deleteFile"==b&&(p.FileTree.isResourceFolder(a.resourcePath)?d.Command.deleteDirectory(a):d.Command.deleteFile(a))}var q=!1;m.showTree=function(){0==
q&&(window.setTimeout(f,500),q=!0);t.EventBus.createRoute("RELOAD_TREE",f)};m.openTreeFile=l;m.openTreeHistoryFile=function(a,b,c){var d=a.toLowerCase(),f=a.replace(/^\/resource/i,"/history");k.Common.stringEndsWith(d,".json")||k.Common.stringEndsWith(d,".js"),h.ajax({url:f+"?time\x3d"+b,type:"get",success:function(b){e(a,c,b)},error:function(b){e(a,c,"// Could not find "+d)},async:!1})}})(f.FileExplorer||(f.FileExplorer={}))});
