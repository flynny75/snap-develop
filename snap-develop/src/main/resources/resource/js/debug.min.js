var DebugManager;
(function(g){function p(){var c=currentTime(),b={},a=0,d;for(d in e)if(e.hasOwnProperty(d)){var f=e[d];null!=f&&(f.time+1E4>c?b[d]=f:a++)}e=b;0<a&&h();Command.pingProcess()}function l(c,b,a){null!=a&&(e[a]=null);d==a&&(suspendedThreads={},currentFocusThread=null,ThreadManager.terminateThreads(),n());h()}function q(c,b,a){b=JSON.parse(a);c=b.process;a=""+b.focus;e[c]={resource:b.resource,system:b.system,time:b.time,running:"true"==b.running,focus:a,project:b.project};"true"==a?(b=e[c],null!=b&&null!=
b.resource?(FileTree.createResourcePath(b.resource),$("#toolbarDebug").css("opacity","1.0"),$("#toolbarDebug").css("filter","alpha(opacity\x3d100)"),StatusPanel.showProcessStatus(b.resource,c)):($("#toolbarDebug").css("opacity","0.4"),$("#toolbarDebug").css("filter","alpha(opacity\x3d40)"),$("#process").html(""),FileEditor.clearEditorHighlights()),d!=c&&(Profiler.clearProfiler(),ThreadManager.clearThreads(),VariableManager.clearVariables()),ProcessConsole.updateConsoleFocus(c),d=c):d==c&&n();h()}
function n(){d=null;ThreadManager.clearThreads();VariableManager.clearVariables();$("#toolbarDebug").css("opacity","0.4");$("#toolbarDebug").css("filter","alpha(opacity\x3d40)");$("#process").html("")}function r(){e={};d=null;w2ui.debug.records=[];w2ui.debug.refresh()}function h(){var c=[],b=1,a;for(a in e)if(e.hasOwnProperty(a)){var k=e[a];if(null!=k){var f=k.project;if(f==document.title||null==f){var f="\x3cdiv class\x3d'debugIdleRecord'\x3e"+a+"\x3c/div\x3e",g="WAITING",h="\x26nbsp;\x3cinput type\x3d'radio'\x3e\x3clabel\x3e\x3c/label\x3e",
m="",l=!1;d==a&&(h="\x26nbsp;\x3cinput type\x3d'radio' checked\x3e\x3clabel\x3e\x3c/label\x3e");null!=k.resource&&(m=FileTree.createResourcePath(k.resource),d==a?(f="\x3cdiv class\x3d'debugFocusRecord'\x3e"+a+"\x3c/div\x3e",g="DEBUGGING"):(f="\x3cdiv class\x3d'debugRecord'\x3e"+a+"\x3c/div\x3e",g="RUNNING"),m=m.resourcePath,l=!0);c.push({recid:b++,name:f,active:h,process:a,status:g,running:l,system:k.system,resource:k.resource,focus:d==a,script:m})}else console.log("Ignoring process "+a+" as it belongs to "+
f)}}updateTableRecords(c,"debug")}var e={},d=null;g.createStatus=function(){createRoute("STATUS",q,r);createRoute("TERMINATE",l);createRoute("EXIT",l);setInterval(p,1E3)};g.isCurrentStatusFocusRunning=function(){if(d){var c=e[statusProcess];if(c)return null!=c.resource}return!1};g.currentStatusFocus=function(){return d};g.showStatus=h})(DebugManager||(DebugManager={}));ModuleSystem.registerModule("debug","Debug module: debug.js",null,DebugManager.createStatus,["common","socket","tree","threads"]);
