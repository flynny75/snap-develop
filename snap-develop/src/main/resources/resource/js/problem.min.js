var currentProblems={};function registerProblems(){createRoute("PROBLEM",updateProblems);setInterval(refreshProblems,1E3)}function refreshProblems(){var a=currentTime(),b={},d=0,c;for(c in currentProblems)if(currentProblems.hasOwnProperty(c)){var e=currentProblems[c];null!=e&&(e.time+1E4>a?b[c]=e:d++)}currentProblems=b;0<d&&showProblems()}
function showProblems(){var a=[],b=1,d;for(d in currentProblems)if(currentProblems.hasOwnProperty(d)){var c=currentProblems[d];null!=c&&a.push({recid:b++,line:c.line,location:"Line "+c.line,resource:c.resource.filePath,description:c.message,project:c.project,script:c.resource.resourcePath})}w2ui.problems.records=a;w2ui.problems.refresh()}function clearProblems(){var a=w2ui.problems;currentProblems={};FileEditor.clearEditorHighlights();null!=a&&(a.records=[],a.refresh())}
function highlightProblems(){var a=FileEditor.loadEditor().resource;null!=a&&currentProblems.hasOwnProperty(a.resourcePath)&&(a=currentProblems[a.resourcePath],null!=a?(FileEditor.clearEditorHighlights(),FileEditor.createEditorHighlight(a.line,"problemHighlight")):FileEditor.clearEditorHighlights())}
function updateProblems(a,b,d){b=JSON.parse(d);a=FileTree.createResourcePath(b.resource);b={line:b.line,message:"\x3cdiv class\x3d'errorDescription'\x3e"+b.description+"\x3c/div\x3e",resource:a,project:b.project,time:b.time};currentProblems[a.resourcePath]=0<=b.line?b:null;showProblems();highlightProblems()}ModuleSystem.registerModule("problem","Problem module: problem.js",registerProblems,["common","socket"]);
