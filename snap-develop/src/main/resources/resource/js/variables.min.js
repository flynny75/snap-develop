var expandVariableHistory={},expandEvaluationHistory={};function toggleExpandVariable(a){a=expandVariableTree(a,expandVariableHistory);null!=a&&Command.browseScriptVariables(a)}function toggleExpandEvaluation(a,f){var c=expandVariableTree(a,expandEvaluationHistory);null!=c&&Command.browseScriptEvaluation(c,f,!1)}
function expandVariableTree(a,f){var c=ThreadManager.focusedThread(),h=a+".*",g=a+".";if(null!=c){var d=f[c.thread];null==d&&(d=[],f[c.thread]=d);for(var c=[],b=0;b<d.length;b++){var k=d[b];0==k.indexOf(g)&&c.push(k)}for(b=0;b<c.length;b++)g=d.indexOf(c[b]),-1!=g&&d.splice(g,1);0==c.length&&d.push(h);return d}return null}
function showVariables(){var a=ThreadManager.focusedThreadVariables(),f=ThreadManager.focusedThreadEvaluation();showVariablesGrid(a,"variables",!1);showVariablesGrid(f,"evaluation",!0)}
function showVariablesGrid(a,f,c){var h=[],g=[],d=1,b;for(b in a)a.hasOwnProperty(b)&&h.push(b);h.sort();for(var k=0;k<h.length;k++){b=h[k];var e=a[b],p=""+e.expandable,m=""+e.property,n=e.modifiers,l="variableLeaf";0==e.depth&&c?l="variableExpression":"true"==m&&(l=-1!=n.indexOf("[private]")?"variableNodePrivate":-1!=n.indexOf("[protected]")?"variableNodeProtected":-1!=n.indexOf("[public]")?"variableNodePublic":"variableNode");m="\x3cdiv class\x3d'variableData'\x3e"+escapeHtml(e.value)+"\x3c/div\x3e";
l="\x3cdiv title\x3d'"+escapeHtml(e.description)+"' style\x3d'padding-left: "+20*e.depth+"px;'\x3e\x3cdiv class\x3d'"+l+"'\x3e"+escapeHtml(e.name)+"\x3c/div\x3e\x3c/div\x3e";g.push({recid:d++,path:b,name:l,value:m,type:e.type,expandable:"true"==p})}a=w2ui[f];null!=a&&(a.records=g,a.refresh())}function clearEvaluation(){expandEvaluationHistory={}}function clearVariables(){expandVariableHistory={};w2ui.variables.records=[];w2ui.variables.refresh()}
ModuleSystem.registerModule("variables","Variables module: variables.js",null,null,["common"]);
