var FileTree;
(function(g){function n(a,c,b,l,m,f,k,e){$(document).ready(function(){var h="/tree"+a+"?id\x3d"+b+"\x26folders\x3d"+m+"\x26depth\x3d"+e;null!=l&&(h+="\x26expand\x3d"+l);jQuery.ajax({url:h,success:function(a){$("#"+c).html(a);r(b,f,k)},async:!0})})}function r(a,c,b){$("#"+a).fancytree({click:b,expand:function(a,b){Command.folderExpand(b.node.key)},collapse:function(a,b){Command.folderCollapse(b.node.key)}});null!=c&&$("#"+a).contextmenu({delegate:"span.fancytree-title",menu:[{title:"\x26nbsp;New",uiIcon:"menu-new",
children:[{title:"\x26nbsp;File",cmd:"newFile",uiIcon:"menu-new"},{title:"\x26nbsp;Directory",cmd:"newDirectory",uiIcon:"menu-new"}]},{title:"\x26nbsp;Save",cmd:"saveFile",uiIcon:"menu-save"},{title:"\x26nbsp;Rename",cmd:"renameFile",uiIcon:"menu-rename"},{title:"\x26nbsp;Delete",cmd:"deleteFile",uiIcon:"menu-trash",disabled:!1},{title:"\x26nbsp;Run",cmd:"runScript",uiIcon:"menu-run"},{title:"\x26nbsp;Explore",cmd:"exploreDirectory",uiIcon:"menu-explore"}],beforeOpen:function(a,b){$.ui.fancytree.getNode(b.target).setActive();
b.menu.zIndex($(a.target).zIndex()+2E3)},select:function(a,b){var f=$.ui.fancytree.getNode(b.target),e=p(f.tooltip);c(e,b.cmd,b.key,f.isFolder())}})}function q(a){if(!stringEndsWith(a,"/")){var c=a.split(".");return 1===a.length||""===c[0]&&2===c.length?!0:0<=c.pop().indexOf("/")}return!0}function e(a){if(null!=a){for(a=a.replace(/\/+/,"/").replace(/\.#/,"");-1!=a.indexOf("//");)a=a.replace("//","/");stringEndsWith(a,"/")&&(a=a.substring(0,a.length-1));return a}return null}function p(a){for(var c=
"/resource/"+document.title+"/",b="/resource/"+document.title;-1!=a.indexOf("//");)a=a.replace("//","/");if(a==b||a==c)return a={resourcePath:c,projectPath:"/",projectDirectory:"/",filePath:"/",fileName:null,fileDirectory:"/",originalPath:a},JSON.stringify(a),a;0==!a.indexOf("/")&&(a="/"+a);0==!a.indexOf(c)&&(a="/resource/"+document.title+a);for(var c=q(a),b=a.split("/"),l="/resource/"+document.title,m="",f="",k=null,g="",h="",d=3;d<b.length;d++)l+="/"+b[d],m+="/"+b[d],g+="/"+b[d];if(c)if(3<b.length)for(d=
3;d<b.length;d++)f+="/"+b[d],h+="/"+b[d];else h="/";else if(k=b[b.length-1],4<b.length)for(d=3;d<b.length-1;d++)f+="/"+b[d],h+="/"+b[d];else h="/";a={resourcePath:e(l),projectPath:e(m),projectDirectory:e(""==f?"/":f),filePath:e(g),fileName:e(k),fileDirectory:e(h),originalPath:a};JSON.stringify(a);return a}g.createTree=function(a,c,b,e,g,f,k){n(a,c,b,e,g,f,k,1E4)};g.createTreeOfDepth=n;g.isResourceFolder=q;g.cleanResourcePath=e;g.createResourcePath=p})(FileTree||(FileTree={}));
ModuleSystem.registerModule("tree","Tree module: tree.js",null,["common"]);
