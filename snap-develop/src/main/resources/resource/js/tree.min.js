var FileTree;
(function(e){function l(a,d,b,f,m,g,k,e){$(document).ready(function(){var h="/tree"+a+"?id\x3d"+b+"\x26folders\x3d"+m+"\x26depth\x3d"+e;null!=f&&(h+="\x26expand\x3d"+f);$.get(h,function(a){$("#"+d).html(a)});window.setTimeout(function(){$("#"+b).fancytree({click:k});null!=g&&$("#"+b).contextmenu({delegate:"span.fancytree-title",menu:[{title:"\x26nbsp;New",uiIcon:"menu-new",children:[{title:"\x26nbsp;File",cmd:"newFile",uiIcon:"menu-new"},{title:"\x26nbsp;Directory",cmd:"newDirectory",uiIcon:"menu-new"}]},
{title:"\x26nbsp;Save",cmd:"saveFile",uiIcon:"menu-save"},{title:"\x26nbsp;Rename",cmd:"renameFile",uiIcon:"menu-rename"},{title:"\x26nbsp;Delete",cmd:"deleteFile",uiIcon:"menu-trash",disabled:!1},{title:"\x26nbsp;Run",cmd:"runScript",uiIcon:"menu-run"},{title:"\x26nbsp;Explore",cmd:"exploreDirectory",uiIcon:"menu-explore"}],beforeOpen:function(a,b){$.ui.fancytree.getNode(b.target).setActive();b.menu.zIndex($(a.target).zIndex()+2E3)},select:function(a,b){var c=$.ui.fancytree.getNode(b.target),d=n(c.tooltip);
g(d,b.cmd,b.key,c.isFolder())}})},500)})}function p(a){if(!a.endsWith("/")){var d=a.split(".");return 1===a.length||""===d[0]&&2===d.length?!0:0<=d.pop().indexOf("/")}return!0}function f(a){return null!=a?(a=a.replace(/\/+/,"/").replace(/\.#/,""),a.endsWith("/")&&(a=a.substring(0,a.length-1)),a):null}function n(a){var d="/resource/"+document.title+"/";if(a=="/resource/"+document.title||a==d)return a={resourcePath:d,projectPath:"/",projectDirectory:"/",filePath:"/",fileName:null,fileDirectory:"/",
originalPath:a},JSON.stringify(a),a;a.startsWith("/")||(a="/"+a);a.startsWith(d)||(a="/resource/"+document.title+a);for(var d=p(a),b=a.split("/"),e="/resource/"+document.title,m="",g="",k=null,l="",h="",c=3;c<b.length;c++)e+="/"+b[c],m+="/"+b[c],l+="/"+b[c];if(d)if(3<b.length)for(c=3;c<b.length;c++)g+="/"+b[c],h+="/"+b[c];else h="/";else if(k=b[b.length-1],4<b.length)for(c=3;c<b.length-1;c++)g+="/"+b[c],h+="/"+b[c];else h="/";a={resourcePath:f(e),projectPath:f(m),projectDirectory:f(""==g?"/":g),filePath:f(l),
fileName:f(k),fileDirectory:f(h),originalPath:a};JSON.stringify(a);return a}e.createTree=function(a,d,b,e,f,g,k){l(a,d,b,e,f,g,k,1E4)};e.createTreeOfDepth=l;e.isResourceFolder=p;e.cleanResourcePath=f;e.createResourcePath=n})(FileTree||(FileTree={}));ModuleSystem.registerModule("tree","Tree module: tree.js",null,["common"]);
