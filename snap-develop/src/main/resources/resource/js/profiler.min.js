define(["require","exports","w2ui","socket","tree"],function(p,b,f,k,m){(function(b){function l(d,b,g){d=JSON.parse(g).results;b=[];g=[];for(var h=1,c=0,a=0;a<d.length;a++)c+=d[a].time;for(a=0;a<d.length;a++){var e=d[a].time;0<e&&(e=parseInt(e/c*100),g[a]=e)}for(a=0;a<d.length;a++){var c=d[a],e=m.FileTree.createResourcePath(c.resource),k="\x3cdiv class\x3d'profilerRecord'\x3e"+e.projectPath+"\x3c/div\x3e",l="\x3cdiv style\x3d'padding: 2px;'\x3e\x3cdiv style\x3d'height: 10px; background: #ed6761; width: "+
g[a]+"%;'\x3e\x3c/div\x3e\x3c/div\x3e",n=c.count/c.time/1E3;b.push({recid:h++,resource:k,percentage:l,duration:c.time,line:c.line,count:c.count,average:n.toFixed(5),script:e.resourcePath})}f.w2ui.profiler.records=b;f.w2ui.profiler.refresh()}function h(){f.w2ui.profiler.records=[];f.w2ui.profiler.refresh()}b.startProfiler=function(){k.EventBus.createRoute("PROFILE",l,h)};b.clearProfiler=h})(b.Profiler||(b.Profiler={}))});
